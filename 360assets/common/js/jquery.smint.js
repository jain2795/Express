(function(){$.fn.smint=function(options){var settings=$.extend({'scrollSpeed':500,'mySelector':'div'},options);$(this).addClass('smint');var optionLocs=new Array(),lastScrollTop=0,menuHeight=$(".smint").height(),smint=$('.smint'),smintA=$('.smint a'),myOffset=smint.height();if(settings.scrollSpeed){var scrollSpeed=settings.scrollSpeed}if(settings.mySelector){var mySelector=settings.mySelector};return smintA.each(function(index){var id=$(this).attr('href').split('#')[1];if(!$(this).hasClass("extLink")){$(this).attr('id',id);}optionLocs.push(Array($(mySelector+"."+id).position().top-menuHeight,$(mySelector+"."+id).height()+$(mySelector+"."+id).position().top,id));var stickyTop=smint.offset().top;var stickyMenu=function(direction){var scrollTop=$(window).scrollTop()+myOffset;if(scrollTop>stickyTop+myOffset){$('body').css('padding-top',menuHeight);}else{smint.css('position','relative').removeClass('fxd');$('body').css('padding-top','0');}if(optionLocs[index][0]<=scrollTop&&scrollTop<=optionLocs[index][1]){if(direction=="up"){document.getElementById(id).style.background=themecolor;$("#"+id).addClass("active");document.getElementById(optionLocs[index+1][2]).style.background="";$("#"+optionLocs[index+1][2]).removeClass("active");}else if(index>0){document.getElementById(id).style.background=themecolor;$("#"+id).addClass("active");document.getElementById(optionLocs[index-1][2]).style.background="";$("#"+optionLocs[index-1][2]).removeClass("active");}else if(direction==undefined){document.getElementById(id).style.background=themecolor;$("#"+id).addClass("active");}$.each(optionLocs,function(i){if(id!=optionLocs[i][2]){document.getElementById(optionLocs[i][2]).style.background="";$("#"+optionLocs[i][2]).removeClass("active");}});}};stickyMenu();$(window).scroll(function(){var st=$(this).scrollTop()+myOffset;if(st>lastScrollTop){direction="down";}else if(st<lastScrollTop){direction="up";}lastScrollTop=st;stickyMenu(direction);if($(window).scrollTop()+$(window).height()==$(document).height()){smintA.removeClass('active')
$(".smint a:not('.extLink'):last").addClass('active')}else{smintA.last().removeClass('active')}});$(this).on('click',function(e){var myOffset=smint.height();e.preventDefault();var hash=$(this).attr('href').split('#')[1];var goTo=$(mySelector+'.'+hash).offset().top-myOffset;$("html, body").stop().animate({scrollTop:goTo},scrollSpeed);if($(this).hasClass("extLink")){return false;}});$('.intLink').on('click',function(e){var myOffset=smint.height();e.preventDefault();var hash=$(this).attr('href').split('#')[1];if(smint.hasClass('fxd')){var goTo=$(mySelector+'.'+hash).position().top-myOffset;}else{var goTo=$(mySelector+'.'+hash).position().top-myOffset*2;}$("html, body").stop().animate({scrollTop:goTo},scrollSpeed);if($(this).hasClass("extLink")){return false;}});});};$.fn.smint.defaults={'scrollSpeed':500,'mySelector':'div'};})(jQuery);